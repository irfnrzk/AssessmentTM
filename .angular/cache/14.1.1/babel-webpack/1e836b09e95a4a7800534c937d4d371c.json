{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { JobService } from '../shared/job.service';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/job.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"@angular/router\";\n\nfunction JobComponent_tr_54_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const job_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(job_r3.JobStatus);\n  }\n}\n\nfunction JobComponent_tr_54_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const job_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(job_r3.JobStatus);\n  }\n}\n\nfunction JobComponent_tr_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, JobComponent_tr_54_td_9_Template, 2, 1, \"td\", 23);\n    i0.ɵɵtemplate(10, JobComponent_tr_54_td_10_Template, 2, 1, \"td\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const job_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(job_r3.JobID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(job_r3.JobTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(job_r3.Company);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(job_r3.State);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", job_r3.JobStatus == \"Closed\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", job_r3.JobStatus == \"Open\");\n  }\n}\n\nfunction JobComponent_h6_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 27);\n    i0.ɵɵtext(1, \"No Results Available\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction JobComponent_ngb_pagination_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ngb-pagination\", 28);\n    i0.ɵɵlistener(\"pageChange\", function JobComponent_ngb_pagination_57_Template_ngb_pagination_pageChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.page = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"page\", ctx_r2.page)(\"pageSize\", ctx_r2.pageSize)(\"collectionSize\", ctx_r2.jobLen);\n  }\n}\n\nexport let JobComponent = /*#__PURE__*/(() => {\n  class JobComponent {\n    constructor(jobService) {\n      this.jobService = jobService;\n      this.page = 1;\n      this.pageSize = 10;\n      this.currentDate = new Date();\n      this.myarray = [];\n    }\n\n    ngOnInit() {\n      this.getJobList();\n      this.filterForm = new FormGroup({\n        filterCompany: new FormControl(''),\n        filterState: new FormControl(''),\n        filterStatus: new FormControl(''),\n        filterJobID: new FormControl(''),\n        filterTitle: new FormControl('')\n      });\n    }\n\n    getJobList() {\n      this.jobService.get_data().subscribe(res => {\n        let data = res;\n        console.log(data, 'ini res');\n\n        for (let i = 0; i < data.length; i++) {\n          if (this.isClosed(data[i].CloseDate)) {\n            this.myarray.push({\n              JobID: i + 1,\n              JobTitle: data[i].JobTitle,\n              Company: data[i].Company,\n              State: data[i].State,\n              CloseDate: data[i].CloseDate,\n              JobStatus: \"Closed\"\n            });\n          } else if (this.isOpen(data[i].CloseDate)) {\n            this.myarray.push({\n              JobID: i + 1,\n              JobTitle: data[i].JobTitle,\n              Company: data[i].Company,\n              State: data[i].State,\n              CloseDate: data[i].CloseDate,\n              JobStatus: \"Open\"\n            });\n          }\n        }\n\n        this.jobList = this.myarray;\n        this.jobLen = this.jobList.length;\n        console.log(this.myarray, 'ini data');\n      });\n    }\n\n    isClosed(CloseDate) {\n      let momentVar = moment(CloseDate, 'DD-MM-YYYY');\n      let endDate = new Date(momentVar.format(\"YYYY-MM-DDTHH:mm:ssZ\"));\n      return endDate < this.currentDate;\n    }\n\n    isOpen(CloseDate) {\n      let momentVar = moment(CloseDate, 'DD-MM-YYYY');\n      let endDate = new Date(momentVar.format(\"YYYY-MM-DDTHH:mm:ssZ\"));\n      return endDate > this.currentDate;\n    } //Reset filter\n\n\n    resetFilter() {\n      this.filterForm.setValue({\n        filterCompany: \"\",\n        filterState: \"\",\n        filterStatus: \"\",\n        filterJobID: \"\",\n        filterTitle: \"\"\n      });\n    }\n\n    capitalizeWords(text) {\n      return text.replace(/(?:^|\\s)\\S/g, res => {\n        return res.toUpperCase();\n      });\n    }\n\n    getJobFilter() {\n      let company = this.filterForm.get('filterCompany')?.value.toUpperCase();\n      let state = this.capitalizeWords(this.filterForm.get('filterState')?.value);\n      let status = this.filterForm.get('filterStatus')?.value;\n      let jobID = this.filterForm.get('filterJobID')?.value;\n      let title = this.capitalizeWords(this.filterForm.get('filterTitle')?.value);\n\n      if (company == '' && state == '' && status == '' && jobID == '' && title == '') {\n        this.jobList = this.myarray;\n      } else if (company != '' && state == '' && status == '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.Company == company);\n      } else if (company == '' && state != '' && status == '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.State == state);\n      } else if (company == '' && state == '' && status != '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.JobStatus == status);\n      } else if (company == '' && state == '' && status == '' && jobID != '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.JobID == jobID);\n      } else if (company == '' && state == '' && status == '' && jobID == '' && title != '') {\n        this.jobList = this.myarray.filter(x => x.JobTitle == title);\n      } else if (company != '' && state != '' && status == '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.Company == company && x.State == state);\n      } else if (company != '' && state == '' && status != '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.Company == company && x.JobStatus == status);\n      } else if (company != '' && state == '' && status == '' && jobID != '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.Company == company && x.JobID == jobID);\n      } else if (company != '' && state == '' && status == '' && jobID == '' && title != '') {\n        this.jobList = this.myarray.filter(x => x.Company == company && x.JobTitle == title);\n      } else if (company == '' && state != '' && status != '' && jobID == '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.State == state && x.JobStatus == status);\n      } else if (company == '' && state != '' && status == '' && jobID != '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.State == state && x.JobID == jobID);\n      } else if (company == '' && state != '' && status == '' && jobID == '' && title != '') {\n        this.jobList = this.myarray.filter(x => x.State == state && x.JobTitle == title);\n      } else if (company == '' && state == '' && status != '' && jobID != '' && title == '') {\n        this.jobList = this.myarray.filter(x => x.JobStatus == status && x.JobID == jobID);\n      } else if (company == '' && state == '' && status != '' && jobID == '' && title != '') {\n        this.jobList = this.myarray.filter(x => x.JobStatus == status && x.JobTitle == title);\n      } else if (company == '' && state == '' && status == '' && jobID != '' && title != '') {\n        this.jobList = this.myarray.filter(x => x.JobID == jobID && x.JobTitle == title);\n      }\n\n      this.jobLen = this.jobList.length;\n      console.log(this.jobList);\n      this.resetFilter();\n    }\n\n  }\n\n  JobComponent.ɵfac = function JobComponent_Factory(t) {\n    return new (t || JobComponent)(i0.ɵɵdirectiveInject(i1.JobService));\n  };\n\n  JobComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: JobComponent,\n    selectors: [[\"app-job\"]],\n    features: [i0.ɵɵProvidersFeature([JobService])],\n    decls: 59,\n    vars: 8,\n    consts: [[\"role\", \"banner\", 1, \"toolbar\"], [\"width\", \"80\", \"alt\", \"TM LOGO\", \"src\", \"assets/img/TM_LOGO.png\"], [1, \"spacer\"], [\"role\", \"main\", 1, \"content\"], [3, \"formGroup\"], [1, \"mb-3\", \"row\"], [\"for\", \"table-filtering-search\", 1, \"col-xs-3\", \"col-sm-auto\", \"col-form-label\"], [1, \"col-xs-3\", \"col-sm-auto\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", \"formControlName\", \"filterJobID\", 1, \"form-control\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", \"formControlName\", \"filterTitle\", 1, \"form-control\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", \"formControlName\", \"filterCompany\", 1, \"form-control\"], [\"id\", \"table-filtering-search\", \"type\", \"text\", \"formControlName\", \"filterState\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"filterStatus\", \"list\", \"browsers\", \"placeholder\", \"All\", 1, \"form-control\"], [\"id\", \"browsers\"], [\"value\", \"Open\"], [\"value\", \"Closed\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center\", 3, \"page\", \"pageSize\", \"collectionSize\", \"pageChange\", 4, \"ngIf\"], [\"scope\", \"row\"], [\"style\", \"color: red;font-weight: bold;\", 4, \"ngIf\"], [\"style\", \"color: rgb(26, 199, 26);font-weight: bold;\", 4, \"ngIf\"], [2, \"color\", \"red\", \"font-weight\", \"bold\"], [2, \"color\", \"rgb(26, 199, 26)\", \"font-weight\", \"bold\"], [2, \"color\", \"red\"], [1, \"d-flex\", \"justify-content-center\", 3, \"page\", \"pageSize\", \"collectionSize\", \"pageChange\"]],\n    template: function JobComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"img\", 1)(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"span\");\n        i0.ɵɵtext(4, \"WELCOME!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(5, \"\\u00A0\\u00A0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 3)(7, \"h2\");\n        i0.ɵɵtext(8, \"Filter Jobs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"form\", 4)(10, \"div\", 5)(11, \"label\", 6);\n        i0.ɵɵtext(12, \"Job ID:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelement(14, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"label\", 6);\n        i0.ɵɵtext(16, \"Job Title:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 7);\n        i0.ɵɵelement(18, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 6);\n        i0.ɵɵtext(21, \"Company:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 7);\n        i0.ɵɵelement(23, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"label\", 6);\n        i0.ɵɵtext(25, \"State:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 7);\n        i0.ɵɵelement(27, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"label\", 6);\n        i0.ɵɵtext(29, \"Job Status:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 7);\n        i0.ɵɵelement(31, \"input\", 12);\n        i0.ɵɵelementStart(32, \"datalist\", 13);\n        i0.ɵɵelement(33, \"option\", 14)(34, \"option\", 15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"div\", 7)(36, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function JobComponent_Template_button_click_36_listener() {\n          return ctx.getJobFilter();\n        });\n        i0.ɵɵtext(37, \"Apply\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(38, \"h2\");\n        i0.ɵɵtext(39, \"Jobs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"table\", 17)(41, \"thead\")(42, \"tr\")(43, \"th\", 18);\n        i0.ɵɵtext(44, \"Job ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"th\", 18);\n        i0.ɵɵtext(46, \"Job Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"th\", 18);\n        i0.ɵɵtext(48, \"Company\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"th\", 18);\n        i0.ɵɵtext(50, \"State\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"th\", 18);\n        i0.ɵɵtext(52, \"Job Status\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(53, \"tbody\");\n        i0.ɵɵtemplate(54, JobComponent_tr_54_Template, 11, 6, \"tr\", 19);\n        i0.ɵɵpipe(55, \"slice\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(56, JobComponent_h6_56_Template, 2, 0, \"h6\", 20);\n        i0.ɵɵtemplate(57, JobComponent_ngb_pagination_57_Template, 1, 3, \"ngb-pagination\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(58, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\n        i0.ɵɵadvance(45);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(55, 4, ctx.jobList, (ctx.page - 1) * ctx.pageSize, ctx.page * ctx.pageSize));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.jobLen < 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.jobLen > 0);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i4.NgbPagination, i5.RouterOutlet, i2.SlicePipe],\n    encapsulation: 2\n  });\n  return JobComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}