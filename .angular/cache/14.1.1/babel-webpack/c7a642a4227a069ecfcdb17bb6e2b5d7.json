{"ast":null,"code":"import { Subscriber } from '../Subscriber';\nexport function bufferCount(bufferSize, startBufferEvery = null) {\n  return function bufferCountOperatorFunction(source) {\n    return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));\n  };\n}\n\nclass BufferCountOperator {\n  constructor(bufferSize, startBufferEvery) {\n    this.bufferSize = bufferSize;\n    this.startBufferEvery = startBufferEvery;\n\n    if (!startBufferEvery || bufferSize === startBufferEvery) {\n      this.subscriberClass = BufferCountSubscriber;\n    } else {\n      this.subscriberClass = BufferSkipCountSubscriber;\n    }\n  }\n\n  call(subscriber, source) {\n    return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\n  }\n\n}\n\nclass BufferCountSubscriber extends Subscriber {\n  constructor(destination, bufferSize) {\n    super(destination);\n    this.bufferSize = bufferSize;\n    this.buffer = [];\n  }\n\n  _next(value) {\n    const buffer = this.buffer;\n    buffer.push(value);\n\n    if (buffer.length == this.bufferSize) {\n      this.destination.next(buffer);\n      this.buffer = [];\n    }\n  }\n\n  _complete() {\n    const buffer = this.buffer;\n\n    if (buffer.length > 0) {\n      this.destination.next(buffer);\n    }\n\n    super._complete();\n  }\n\n}\n\nclass BufferSkipCountSubscriber extends Subscriber {\n  constructor(destination, bufferSize, startBufferEvery) {\n    super(destination);\n    this.bufferSize = bufferSize;\n    this.startBufferEvery = startBufferEvery;\n    this.buffers = [];\n    this.count = 0;\n  }\n\n  _next(value) {\n    const {\n      bufferSize,\n      startBufferEvery,\n      buffers,\n      count\n    } = this;\n    this.count++;\n\n    if (count % startBufferEvery === 0) {\n      buffers.push([]);\n    }\n\n    for (let i = buffers.length; i--;) {\n      const buffer = buffers[i];\n      buffer.push(value);\n\n      if (buffer.length === bufferSize) {\n        buffers.splice(i, 1);\n        this.destination.next(buffer);\n      }\n    }\n  }\n\n  _complete() {\n    const {\n      buffers,\n      destination\n    } = this;\n\n    while (buffers.length > 0) {\n      let buffer = buffers.shift();\n\n      if (buffer.length > 0) {\n        destination.next(buffer);\n      }\n    }\n\n    super._complete();\n  }\n\n}","map":{"version":3,"names":["Subscriber","bufferCount","bufferSize","startBufferEvery","bufferCountOperatorFunction","source","lift","BufferCountOperator","constructor","subscriberClass","BufferCountSubscriber","BufferSkipCountSubscriber","call","subscriber","subscribe","destination","buffer","_next","value","push","length","next","_complete","buffers","count","i","splice","shift"],"sources":["C:/Project/AngularApp/node_modules/rxjs/_esm2015/internal/operators/bufferCount.js"],"sourcesContent":["import { Subscriber } from '../Subscriber';\r\nexport function bufferCount(bufferSize, startBufferEvery = null) {\r\n    return function bufferCountOperatorFunction(source) {\r\n        return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));\r\n    };\r\n}\r\nclass BufferCountOperator {\r\n    constructor(bufferSize, startBufferEvery) {\r\n        this.bufferSize = bufferSize;\r\n        this.startBufferEvery = startBufferEvery;\r\n        if (!startBufferEvery || bufferSize === startBufferEvery) {\r\n            this.subscriberClass = BufferCountSubscriber;\r\n        }\r\n        else {\r\n            this.subscriberClass = BufferSkipCountSubscriber;\r\n        }\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\r\n    }\r\n}\r\nclass BufferCountSubscriber extends Subscriber {\r\n    constructor(destination, bufferSize) {\r\n        super(destination);\r\n        this.bufferSize = bufferSize;\r\n        this.buffer = [];\r\n    }\r\n    _next(value) {\r\n        const buffer = this.buffer;\r\n        buffer.push(value);\r\n        if (buffer.length == this.bufferSize) {\r\n            this.destination.next(buffer);\r\n            this.buffer = [];\r\n        }\r\n    }\r\n    _complete() {\r\n        const buffer = this.buffer;\r\n        if (buffer.length > 0) {\r\n            this.destination.next(buffer);\r\n        }\r\n        super._complete();\r\n    }\r\n}\r\nclass BufferSkipCountSubscriber extends Subscriber {\r\n    constructor(destination, bufferSize, startBufferEvery) {\r\n        super(destination);\r\n        this.bufferSize = bufferSize;\r\n        this.startBufferEvery = startBufferEvery;\r\n        this.buffers = [];\r\n        this.count = 0;\r\n    }\r\n    _next(value) {\r\n        const { bufferSize, startBufferEvery, buffers, count } = this;\r\n        this.count++;\r\n        if (count % startBufferEvery === 0) {\r\n            buffers.push([]);\r\n        }\r\n        for (let i = buffers.length; i--;) {\r\n            const buffer = buffers[i];\r\n            buffer.push(value);\r\n            if (buffer.length === bufferSize) {\r\n                buffers.splice(i, 1);\r\n                this.destination.next(buffer);\r\n            }\r\n        }\r\n    }\r\n    _complete() {\r\n        const { buffers, destination } = this;\r\n        while (buffers.length > 0) {\r\n            let buffer = buffers.shift();\r\n            if (buffer.length > 0) {\r\n                destination.next(buffer);\r\n            }\r\n        }\r\n        super._complete();\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}