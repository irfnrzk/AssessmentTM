{"ast":null,"code":"import { Subject } from '../Subject';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function retryWhen(notifier) {\n  return source => source.lift(new RetryWhenOperator(notifier, source));\n}\n\nclass RetryWhenOperator {\n  constructor(notifier, source) {\n    this.notifier = notifier;\n    this.source = source;\n  }\n\n  call(subscriber, source) {\n    return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\n  }\n\n}\n\nclass RetryWhenSubscriber extends SimpleOuterSubscriber {\n  constructor(destination, notifier, source) {\n    super(destination);\n    this.notifier = notifier;\n    this.source = source;\n  }\n\n  error(err) {\n    if (!this.isStopped) {\n      let errors = this.errors;\n      let retries = this.retries;\n      let retriesSubscription = this.retriesSubscription;\n\n      if (!retries) {\n        errors = new Subject();\n\n        try {\n          const {\n            notifier\n          } = this;\n          retries = notifier(errors);\n        } catch (e) {\n          return super.error(e);\n        }\n\n        retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\n      } else {\n        this.errors = undefined;\n        this.retriesSubscription = undefined;\n      }\n\n      this._unsubscribeAndRecycle();\n\n      this.errors = errors;\n      this.retries = retries;\n      this.retriesSubscription = retriesSubscription;\n      errors.next(err);\n    }\n  }\n\n  _unsubscribe() {\n    const {\n      errors,\n      retriesSubscription\n    } = this;\n\n    if (errors) {\n      errors.unsubscribe();\n      this.errors = undefined;\n    }\n\n    if (retriesSubscription) {\n      retriesSubscription.unsubscribe();\n      this.retriesSubscription = undefined;\n    }\n\n    this.retries = undefined;\n  }\n\n  notifyNext() {\n    const {\n      _unsubscribe\n    } = this;\n    this._unsubscribe = null;\n\n    this._unsubscribeAndRecycle();\n\n    this._unsubscribe = _unsubscribe;\n    this.source.subscribe(this);\n  }\n\n}","map":{"version":3,"names":["Subject","SimpleOuterSubscriber","innerSubscribe","SimpleInnerSubscriber","retryWhen","notifier","source","lift","RetryWhenOperator","constructor","call","subscriber","subscribe","RetryWhenSubscriber","destination","error","err","isStopped","errors","retries","retriesSubscription","e","undefined","_unsubscribeAndRecycle","next","_unsubscribe","unsubscribe","notifyNext"],"sources":["C:/Project/AngularApp/node_modules/rxjs/_esm2015/internal/operators/retryWhen.js"],"sourcesContent":["import { Subject } from '../Subject';\r\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\r\nexport function retryWhen(notifier) {\r\n    return (source) => source.lift(new RetryWhenOperator(notifier, source));\r\n}\r\nclass RetryWhenOperator {\r\n    constructor(notifier, source) {\r\n        this.notifier = notifier;\r\n        this.source = source;\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\r\n    }\r\n}\r\nclass RetryWhenSubscriber extends SimpleOuterSubscriber {\r\n    constructor(destination, notifier, source) {\r\n        super(destination);\r\n        this.notifier = notifier;\r\n        this.source = source;\r\n    }\r\n    error(err) {\r\n        if (!this.isStopped) {\r\n            let errors = this.errors;\r\n            let retries = this.retries;\r\n            let retriesSubscription = this.retriesSubscription;\r\n            if (!retries) {\r\n                errors = new Subject();\r\n                try {\r\n                    const { notifier } = this;\r\n                    retries = notifier(errors);\r\n                }\r\n                catch (e) {\r\n                    return super.error(e);\r\n                }\r\n                retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\r\n            }\r\n            else {\r\n                this.errors = undefined;\r\n                this.retriesSubscription = undefined;\r\n            }\r\n            this._unsubscribeAndRecycle();\r\n            this.errors = errors;\r\n            this.retries = retries;\r\n            this.retriesSubscription = retriesSubscription;\r\n            errors.next(err);\r\n        }\r\n    }\r\n    _unsubscribe() {\r\n        const { errors, retriesSubscription } = this;\r\n        if (errors) {\r\n            errors.unsubscribe();\r\n            this.errors = undefined;\r\n        }\r\n        if (retriesSubscription) {\r\n            retriesSubscription.unsubscribe();\r\n            this.retriesSubscription = undefined;\r\n        }\r\n        this.retries = undefined;\r\n    }\r\n    notifyNext() {\r\n        const { _unsubscribe } = this;\r\n        this._unsubscribe = null;\r\n        this._unsubscribeAndRecycle();\r\n        this._unsubscribe = _unsubscribe;\r\n        this.source.subscribe(this);\r\n    }\r\n}\r\n"],"mappings":"AAAA,SAASA,OAAT,QAAwB,YAAxB;AACA,SAASC,qBAAT,EAAgCC,cAAhC,EAAgDC,qBAAhD,QAA6E,mBAA7E;AACA,OAAO,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;EAChC,OAAQC,MAAD,IAAYA,MAAM,CAACC,IAAP,CAAY,IAAIC,iBAAJ,CAAsBH,QAAtB,EAAgCC,MAAhC,CAAZ,CAAnB;AACH;;AACD,MAAME,iBAAN,CAAwB;EACpBC,WAAW,CAACJ,QAAD,EAAWC,MAAX,EAAmB;IAC1B,KAAKD,QAAL,GAAgBA,QAAhB;IACA,KAAKC,MAAL,GAAcA,MAAd;EACH;;EACDI,IAAI,CAACC,UAAD,EAAaL,MAAb,EAAqB;IACrB,OAAOA,MAAM,CAACM,SAAP,CAAiB,IAAIC,mBAAJ,CAAwBF,UAAxB,EAAoC,KAAKN,QAAzC,EAAmD,KAAKC,MAAxD,CAAjB,CAAP;EACH;;AAPmB;;AASxB,MAAMO,mBAAN,SAAkCZ,qBAAlC,CAAwD;EACpDQ,WAAW,CAACK,WAAD,EAAcT,QAAd,EAAwBC,MAAxB,EAAgC;IACvC,MAAMQ,WAAN;IACA,KAAKT,QAAL,GAAgBA,QAAhB;IACA,KAAKC,MAAL,GAAcA,MAAd;EACH;;EACDS,KAAK,CAACC,GAAD,EAAM;IACP,IAAI,CAAC,KAAKC,SAAV,EAAqB;MACjB,IAAIC,MAAM,GAAG,KAAKA,MAAlB;MACA,IAAIC,OAAO,GAAG,KAAKA,OAAnB;MACA,IAAIC,mBAAmB,GAAG,KAAKA,mBAA/B;;MACA,IAAI,CAACD,OAAL,EAAc;QACVD,MAAM,GAAG,IAAIlB,OAAJ,EAAT;;QACA,IAAI;UACA,MAAM;YAAEK;UAAF,IAAe,IAArB;UACAc,OAAO,GAAGd,QAAQ,CAACa,MAAD,CAAlB;QACH,CAHD,CAIA,OAAOG,CAAP,EAAU;UACN,OAAO,MAAMN,KAAN,CAAYM,CAAZ,CAAP;QACH;;QACDD,mBAAmB,GAAGlB,cAAc,CAACiB,OAAD,EAAU,IAAIhB,qBAAJ,CAA0B,IAA1B,CAAV,CAApC;MACH,CAVD,MAWK;QACD,KAAKe,MAAL,GAAcI,SAAd;QACA,KAAKF,mBAAL,GAA2BE,SAA3B;MACH;;MACD,KAAKC,sBAAL;;MACA,KAAKL,MAAL,GAAcA,MAAd;MACA,KAAKC,OAAL,GAAeA,OAAf;MACA,KAAKC,mBAAL,GAA2BA,mBAA3B;MACAF,MAAM,CAACM,IAAP,CAAYR,GAAZ;IACH;EACJ;;EACDS,YAAY,GAAG;IACX,MAAM;MAAEP,MAAF;MAAUE;IAAV,IAAkC,IAAxC;;IACA,IAAIF,MAAJ,EAAY;MACRA,MAAM,CAACQ,WAAP;MACA,KAAKR,MAAL,GAAcI,SAAd;IACH;;IACD,IAAIF,mBAAJ,EAAyB;MACrBA,mBAAmB,CAACM,WAApB;MACA,KAAKN,mBAAL,GAA2BE,SAA3B;IACH;;IACD,KAAKH,OAAL,GAAeG,SAAf;EACH;;EACDK,UAAU,GAAG;IACT,MAAM;MAAEF;IAAF,IAAmB,IAAzB;IACA,KAAKA,YAAL,GAAoB,IAApB;;IACA,KAAKF,sBAAL;;IACA,KAAKE,YAAL,GAAoBA,YAApB;IACA,KAAKnB,MAAL,CAAYM,SAAZ,CAAsB,IAAtB;EACH;;AAnDmD"},"metadata":{},"sourceType":"module"}